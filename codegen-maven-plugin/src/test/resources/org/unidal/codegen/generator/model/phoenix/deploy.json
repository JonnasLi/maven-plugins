

{
"status":"failed", 
"hosts": [ 
{
"host": "127.0.0.1",
"offset": 16,
"progress": 100,
"step": "FAILED",
"status": "failed",
"log": "[05-03 14:58:23] [INFO] [workflow.Engine] current step INJECT_PHOENIX_LOADER<br>[05-03 14:58:23] [INFO] [core.DefaultContainerManager] try to add <Loader> whose docBase matches /user-web/current/user-web.war in /usr/local/jboss/server/default/deploy/jboss-web.deployer/server.xml<br>[05-03 14:58:23] [ERROR] [upgrade.DefaultKernelUpgradeStepProvider] error inject phoenix loader<br>org.xml.sax.SAXParseException: The element type \"Host\" must be terminated by the matching end-tag \"</Host>\".<br>	at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:246)<br>	at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:284)<br>	at javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:208)<br>	at com.dianping.phoenix.agent.core.DefaultContainerManager.attachPhoenixContextLoader(DefaultContainerManager.java:82)<br>	at com.dianping.phoenix.agent.core.DefaultContainerManager.attachContainerLoader(DefaultContainerManager.java:57)<br>	at com.dianping.phoenix.agent.core.task.processor.kernel.upgrade.DefaultKernelUpgradeStepProvider.injectPhoenixLoader(DefaultKernelUpgradeStepProvider.java:92)<br>	at com.dianping.phoenix.agent.core.task.processor.kernel.upgrade.KernelUpgradeStep$10.doStep(KernelUpgradeStep.java:196)<br>	at com.dianping.phoenix.agent.core.task.workflow.Engine.start(Engine.java:29)<br>	at com.dianping.phoenix.agent.core.task.processor.kernel.DeployTaskProcessor.updateKernel(DeployTaskProcessor.java:64)<br>	at com.dianping.phoenix.agent.core.task.processor.kernel.DeployTaskProcessor.doTransaction(DeployTaskProcessor.java:53)<br>	at com.dianping.phoenix.agent.core.task.processor.AbstractSerialTaskProcessor$1.run(AbstractSerialTaskProcessor.java:58)<br>	at java.lang.Thread.run(Thread.java:680)<br>	at org.unidal.helper.Threads$RunnableThread.run(Threads.java:287)<br>[05-03 14:58:23] [INFO] [workflow.Engine] step fail<br>[05-03 14:58:23] [INFO] [workflow.Engine] current step ROLLBACK<br>[05-03 14:58:23] [INFO] PID is 23858<br>[05-03 14:58:23] [INFO] CMD is /Users/icloud/workspace/phoenix/phoenix-agent/target/classes/script/agent.sh --container_install_path /usr/local/jboss --server_xml /usr/local/jboss/server/default/deploy/jboss-web.deployer/server.xml --container_type JBOSS --domain user-web --kernel_version 1.0-SNAPSHOT --domain_kernel_base /data/webapps/phoenix/phoenix-kernel/user-web --env dev --kernel_git_url ssh://git@192.168.7.108/arch/phoenix-kernel.git --kernel_git_host 192.168.7.108 --func rollback<br>[05-03 14:58:23] [INFO] stopping container and make it offline<br>[05-03 14:58:23] [INFO] PID is 23868<br>[05-03 14:58:23] [INFO] CMD is ./op_dev.sh -o stop_all -b /usr/local/jboss -c JBOSS<br>[05-03 14:58:23] [INFO] stopping container jboss<br>[05-03 14:58:25] [INFO] container stopped<br>[05-03 14:58:25] [INFO] container stopped and offlined<br>[05-03 14:58:25] [INFO] rolling back kernel<br>HEAD is now at 61a66c3 update to 1.1-SNAPSHOT<br>[05-03 14:58:25] [INFO] kernel version 1.0-SNAPSHOT rolled back<br>[05-03 14:58:25] [INFO] rolling back server.xml<br>HEAD is now at 57ef2de update to 1.1-SNAPSHOT<br>[05-03 14:58:25] [INFO] /usr/local/jboss/server/default/deploy/jboss-web.deployer/server.xml rolled back<br>[05-03 14:58:25] [INFO] All server xml rolled back<br>[05-03 14:58:25] [INFO] starting container<br>[05-03 14:58:25] [INFO] PID is 23893<br>[05-03 14:58:25] [INFO] CMD is ./op_dev.sh -o start_container -b /usr/local/jboss -c JBOSS<br>[05-03 14:58:25] [INFO] starting jboss<br>[05-03 14:58:25] [INFO] jboss started<br>[05-03 14:58:25] [INFO] container started<br>[05-03 14:58:25] [INFO] put container online<br>[05-03 14:58:25] [INFO] PID is 23908<br>[05-03 14:58:25] [INFO] CMD is ./op_dev.sh -o put_container_online -b /usr/local/jboss -c JBOSS<br>[05-03 14:58:25] [INFO] dpsf online<br>[05-03 14:58:25] [INFO] f5nodeonline<br>[05-03 14:58:25] [INFO] container onlined<br>[05-03 14:58:25] [INFO] [workflow.Engine] step success<br>[05-03 14:58:25] [INFO] [workflow.Engine] current step FAILED<br>[05-03 14:58:25] [INFO] [workflow.Engine] step fail<br>[2013-05-03 14:58:25] [05-03 14:58:25] [INFO] [workflow.Engine] current step FAILED<br>[05-03 14:58:25] [INFO] [workflow.Engine] step fail<br><br>[2013-05-03 14:58:25]<br>[2013-05-03 14:58:25] [ERROR] Failed to deploy phoenix kernel(1.0-SNAPSHOT) to host(127.0.0.1).<br>[2013-05-03 14:58:25]<br>[2013-05-03 14:58:25] [ERROR] Failed to deploy phoenix kernel(1.0-SNAPSHOT) to host(127.0.0.1).<br>"
},{
"host": "summary",
"offset": 2,
"progress": 100,
"step": "",
"status": "failed",
"log": "[2013-05-03 14:58:25] Rolling out to host(127.0.0.1) ... FAILED<br>"
}]
}
